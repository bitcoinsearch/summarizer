<?xml version="1.0" ?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - Covenant opcode proposal OP_CONSTRAINDESTINATION (an alternative to OP_CTV)</title>
  <updated>2025-11-12T13:19:47.000877+00:00</updated>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <thread>
    <message id="msg_1" depth="0" position="0" anchor="m616d3b3eadbc7be63437bf55cbeb3d3ca0d9d140">
      <author>Billy Tetrud</author>
      <timestamp>2021-07-21T05:56:00.000Z</timestamp>
    </message>
    <message id="msg_2" depth="1" position="1" reply_to="Billy Tetrud" parent_id="mailing-list-2021-07-m616d3b3eadbc7be63437bf55cbeb3d3ca0d9d140" anchor="m8c75e6fc7a3519fca317ba3f95a5451193b11bea">
      <author>David A. Harding</author>
      <timestamp>2021-07-25T05:38:00.000Z</timestamp>
    </message>
    <message id="msg_3" depth="2" position="2" reply_to="David A. Harding" parent_id="mailing-list-2021-07-m8c75e6fc7a3519fca317ba3f95a5451193b11bea" anchor="m3489becc27443b9f7f65d967b53a188200502acc">
      <author>Billy Tetrud</author>
      <timestamp>2021-07-25T19:49:00.000Z</timestamp>
    </message>
    <message id="msg_4" depth="3" position="3" reply_to="Billy Tetrud" parent_id="mailing-list-2021-07-m3489becc27443b9f7f65d967b53a188200502acc" anchor="m0cca7da4e71de4ac67452f8296461cd767f03ead">
      <author>David A. Harding</author>
      <timestamp>2021-07-26T00:05:00.000Z</timestamp>
    </message>
    <message id="msg_5" depth="5" position="4" anchor="mbee2d8142d375ea74cf4d8dafde0de1411e04260">
      <author>Billy Tetrud</author>
      <timestamp>2021-07-26T20:18:00.000Z</timestamp>
    </message>
    <message id="msg_6" depth="3" position="5" reply_to="Billy Tetrud" parent_id="mailing-list-2021-07-m3489becc27443b9f7f65d967b53a188200502acc" anchor="m651167ac4b1bcf8c03dc5477b98c183d8c6b8d49">
      <author>James MacWhyte</author>
      <timestamp>2021-07-26T21:08:00.000Z</timestamp>
    </message>
    <message id="msg_7" depth="4" position="6" reply_to="James MacWhyte" parent_id="mailing-list-2021-07-m651167ac4b1bcf8c03dc5477b98c183d8c6b8d49" anchor="m12e1e4a91b5c07fb40ba8d25792cff4aa025a34f">
      <author>Billy Tetrud</author>
      <timestamp>2021-07-27T00:41:00.000Z</timestamp>
    </message>
    <message id="msg_8" depth="5" position="7" reply_to="Billy Tetrud" parent_id="mailing-list-2021-07-m12e1e4a91b5c07fb40ba8d25792cff4aa025a34f" anchor="m12ae8e925e389fb1f391d1e08771f01e5a946acc">
      <author>Zac Greenwood</author>
      <timestamp>2021-07-27T11:18:00.000Z</timestamp>
    </message>
    <message id="msg_9" depth="6" position="8" reply_to="Zac Greenwood" parent_id="mailing-list-2021-07-m12ae8e925e389fb1f391d1e08771f01e5a946acc" anchor="m679928565d1633a6f8b4af8e7d0763e016264c35">
      <author>Billy Tetrud</author>
      <timestamp>2021-07-27T17:21:00.000Z</timestamp>
    </message>
    <message id="msg_10" depth="7" position="9" reply_to="Billy Tetrud" parent_id="mailing-list-2021-07-m679928565d1633a6f8b4af8e7d0763e016264c35" anchor="m88467a814c39813ef2f9c035e10f63b61f21811d">
      <author>Zac Greenwood</author>
      <timestamp>2021-07-28T04:57:00.000Z</timestamp>
    </message>
    <message id="msg_11" depth="8" position="10" reply_to="Zac Greenwood" parent_id="mailing-list-2021-07-m88467a814c39813ef2f9c035e10f63b61f21811d" anchor="m067c04cce18a8ff7b44d89d5e7bb9f7bca8842f8">
      <author>Billy Tetrud</author>
      <timestamp>2021-07-28T17:57:00.000Z</timestamp>
    </message>
    <message id="msg_12" depth="9" position="11" reply_to="Billy Tetrud" parent_id="mailing-list-2021-07-m067c04cce18a8ff7b44d89d5e7bb9f7bca8842f8" anchor="mba7f42663a0c34de0e9e8958a043f6cc99938c2a">
      <author>Jeremy</author>
      <timestamp>2021-07-28T22:30:00.000Z</timestamp>
    </message>
    <message id="msg_13" depth="10" position="12" reply_to="Jeremy" parent_id="mailing-list-2021-07-mba7f42663a0c34de0e9e8958a043f6cc99938c2a" anchor="me6b3e9f77649077742a0e4539998224815159cf0">
      <author>Billy Tetrud</author>
      <timestamp>2021-07-30T18:42:00.000Z</timestamp>
    </message>
    <message id="msg_14" depth="9" position="13" reply_to="Billy Tetrud" parent_id="mailing-list-2021-07-m067c04cce18a8ff7b44d89d5e7bb9f7bca8842f8" anchor="ma1b986cd6589e118c8e8e4c161bb0e5ba29d62db">
      <author>Zac Greenwood</author>
      <timestamp>2021-07-31T20:01:00.000Z</timestamp>
    </message>
    <message id="msg_15" depth="10" position="14" reply_to="Zac Greenwood" parent_id="mailing-list-2021-08-ma1b986cd6589e118c8e8e4c161bb0e5ba29d62db" anchor="mfe2ab567561ce5f734c653fb7b824390d6fd6990">
      <author>Billy Tetrud</author>
      <timestamp>2021-08-02T04:40:00.000Z</timestamp>
    </message>
    <message id="msg_16" depth="10" position="15" reply_to="Zac Greenwood" parent_id="mailing-list-2021-08-ma1b986cd6589e118c8e8e4c161bb0e5ba29d62db" anchor="m568beadc5520639d0b5bc8ba465032b573f43887">
      <author>ZmnSCPxj</author>
      <timestamp>2021-08-10T02:17:00.000Z</timestamp>
    </message>
    <message id="msg_17" depth="11" position="16" reply_to="ZmnSCPxj" parent_id="mailing-list-2021-08-m568beadc5520639d0b5bc8ba465032b573f43887" anchor="m606d48c45bbd2478169546fea3b85e47221817f9">
      <author>Zac Greenwood</author>
      <timestamp>2021-08-13T11:02:00.000Z</timestamp>
    </message>
    <message id="msg_18" depth="12" position="17" reply_to="Zac Greenwood" parent_id="mailing-list-2021-08-m606d48c45bbd2478169546fea3b85e47221817f9" anchor="mfb8e44457fda431c0ed5d53a481940ce2f87461a">
      <author>ZmnSCPxj</author>
      <timestamp>2021-08-14T01:50:00.000Z</timestamp>
    </message>
    <message id="msg_19" depth="13" position="18" reply_to="ZmnSCPxj" parent_id="mailing-list-2021-08-mfb8e44457fda431c0ed5d53a481940ce2f87461a" anchor="mcf7035129325a828a53e013e3e1eff57574f914c">
      <author>Zac Greenwood</author>
      <timestamp>2021-08-16T11:17:00.000Z</timestamp>
    </message>
    <message id="msg_20" depth="14" position="19" reply_to="Zac Greenwood" parent_id="mailing-list-2021-08-mcf7035129325a828a53e013e3e1eff57574f914c" anchor="m4c81e285e6b34928625c0d91906b95fc88699e71">
      <author>ZmnSCPxj</author>
      <timestamp>2021-08-16T11:48:00.000Z</timestamp>
    </message>
    <message id="msg_21" depth="15" position="20" reply_to="ZmnSCPxj" parent_id="mailing-list-2021-08-m4c81e285e6b34928625c0d91906b95fc88699e71" anchor="mcedcb2ed55a00695a68c6f596ff8116cfe0f4a35">
      <author>Zac Greenwood</author>
      <timestamp>2021-08-30T14:43:00.000Z</timestamp>
    </message>
    <message id="msg_22" depth="16" position="21" reply_to="Zac Greenwood" parent_id="mailing-list-2021-08-mcedcb2ed55a00695a68c6f596ff8116cfe0f4a35" anchor="m4659c1c1a2a37e52693339c6cab1c2d879545162">
      <author>ZmnSCPxj</author>
      <timestamp>2021-08-31T09:00:00.000Z</timestamp>
    </message>
    <message id="msg_23" depth="17" position="22" reply_to="ZmnSCPxj" parent_id="mailing-list-2021-08-m4659c1c1a2a37e52693339c6cab1c2d879545162" anchor="m8f4a724825a05d9aa5f1dc23b0985f819b1c16cd">
      <author>Zac Greenwood</author>
      <timestamp>2021-08-31T14:09:00.000Z</timestamp>
    </message>
    <message id="msg_24" depth="18" position="23" reply_to="Zac Greenwood" parent_id="mailing-list-2021-08-m8f4a724825a05d9aa5f1dc23b0985f819b1c16cd" anchor="m42c24e0324991ffde5532711f5b2e04088948955">
      <author>ZmnSCPxj</author>
      <timestamp>2021-08-31T14:22:00.000Z</timestamp>
    </message>
    <message id="msg_25" depth="19" position="24" reply_to="ZmnSCPxj" parent_id="mailing-list-2021-09-m42c24e0324991ffde5532711f5b2e04088948955" anchor="mb86a5d891aed79fb089d1bc6360dca87a6b7c4d5">
      <author>Zac Greenwood</author>
      <timestamp>2021-09-01T15:15:00.000Z</timestamp>
    </message>
    <message id="msg_26" depth="11" position="25" reply_to="Billy Tetrud" parent_id="mailing-list-2021-11-me6b3e9f77649077742a0e4539998224815159cf0" anchor="m5977aeb8ca30a1fabf242f0ba95ccf1fa11cda00">
      <author>Billy Tetrud</author>
      <timestamp>2021-11-01T01:19:00.000Z</timestamp>
    </message>
  </thread>
  <link href="bitcoin-dev/Nov_2021/019586_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019290_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019288_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019287_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019286_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019285_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019284_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019283_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019282_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019281_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019280_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019279_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019278_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="bitcoin-dev/July_2021/019274_Covenant-opcode-proposal-OP-CONSTRAINDESTINATION-an-alternative-to-OP-CTV-.xml" rel="alternate"/>
  <link href="https://gnusha.org/url/https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-July/019274.html" rel="alternate"/>
  <link href="https://gnusha.org/url/https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-July/019274.html" rel="alternate"/>
  <link href="https://gnusha.org/url/https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-July/019274.html" rel="alternate"/>
  <entry>
    <id>2</id>
    <title>Combined summary - Covenant opcode proposal OP_CONSTRAINDESTINATION (an alternative to OP_CTV)</title>
    <updated>2025-11-12T13:19:47.000989+00:00</updated>
    <link href="https://gnusha.org/url/https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2021-July/019274.html" rel="alternate"/>
    <published>2025-11-12T13:19:47.000993+00:00</published>
    <summary>The conversation begins with Billy explaining the benefits of a 2-key wallet vault using OP_CD over a normal 2-of-2 multisig wallet. He highlights that with a wallet vault, only one key is needed to spend funds, but an attacker would need to steal two or more keys. This provides better redundancy and security. Billy also shares a link to a wallet vault design that utilizes OP_CD and discusses his vision for creating highly secure wallets.The discussion then shifts to implementing a mechanism to limit the maximum amount that can be sent from an address. Billy suggests designing a system where coins are combined in a single output and encumbered with a script that allows a limited amount to be sent while requiring the remaining bitcoins to be returned to the sender. He emphasizes the effectiveness of such a system in preventing theft. Zac further elaborates on how this mechanism might work in a typical use case scenario and proposes rate-limiting parameters that could be implemented.Next, the optimization of Bitcoin transactions is discussed. Jeremy suggests splitting up the fee limiting functionality from OP_CD into a separate opcode called OP_LIMITFEECONTRIBUTION. Billy acknowledges the considerations involved in this approach, including evaluating input addresses without knowing their contribution amounts. He also suggests allowing the omission of an output value in cases where the entire output amount is contributed by that input to reduce transaction size.The conversations highlight the benefits, limitations, and considerations related to optimizing Bitcoin transactions, implementing mechanisms to limit the maximum amount sent from an address, and creating secure wallet vaults using covenant opcodes like OP_CD. They also discuss the potential impact on transaction size, security, and user experience.Another topic of discussion is the manipulation of fee rates in Bitcoin transactions by miners. It is estimated that filling 15% of each block with self-pay transactions could raise median fees by approximately 5%. However, this type of attack may not be profitable for dishonest miners due to the large number of transactions needed. The proposed use case for wallet vaults is also discussed, aiming to limit the amount that can be stolen through fees by attackers. Concerns are raised about miners abusing the fee limit mechanism in multi-party scenarios.In an email exchange, Billy suggests calculating the median fee rate for each block and taking the average of those stored per-block median numbers. However, Dave disagrees and believes that miners may have the opportunity to raise the fee rate in certain situations. It is emphasized that every miner is also a user of Bitcoin, and every Bitcoin user may eventually become a miner. Dave provides an example where an attacker could work with a cartel of miners to raise the median fee rate and take all of someone's coins in fees.The proposal being discussed involves constraining the amount of fee that an output can contribute. MedianFeeRate and maxFeeContribution are defined as mechanisms to calculate and limit fees. Storing the feerate for every transaction in a 3,000 block window is considered impractical, so it is suggested to find the median fee-rate for each block instead. Concerns are expressed regarding the effect of this proposal on miner incentives and the redundancy of the fee mechanism.Finally, the OP_CONSTRAINDESTINATION opcode is proposed as a solution to restrict the destination address that an output's coins can be directed to. This opcode allows for step-wise covenant scripts and aims to create more flexible wallet vaults compared to OP_CHECKTEMPLATEVERIFY. The proposal can be found on Github, and feedback is welcomed to improve its presentation or identify any issues.</summary>
  </entry>
</feed>