<?xml version="1.0" ?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - {sign|verify}message replacement</title>
  <updated>2025-09-26T15:33:44.908778+00:00</updated>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <thread>
    <message id="msg_1" depth="0" position="0" anchor="m3d6b27e8e0daae3a8640b6c6ad73c2fb8a7b5899">
      <author>[bitcoin-dev] {sign|verify}message replacement Karl Johan Alm</author>
      <timestamp>2018-03-14T08:09:00.000Z</timestamp>
    </message>
    <message id="msg_2" depth="1" position="1" reply_to="[bitcoin-dev] {sign|verify}message replacement Karl Johan Alm" parent_id="mailing-list-2018-03-m3d6b27e8e0daae3a8640b6c6ad73c2fb8a7b5899" anchor="m1915ce83e0f003551cf4e770f80835a8af92b8b0">
      <author>Kalle Rosenbaum</author>
      <timestamp>2018-03-14T09:46:00.000Z</timestamp>
    </message>
    <message id="msg_3" depth="1" position="2" reply_to="[bitcoin-dev] {sign|verify}message replacement Karl Johan Alm" parent_id="mailing-list-2018-03-m3d6b27e8e0daae3a8640b6c6ad73c2fb8a7b5899" anchor="mefac4ce7ad9629feb40133a35ac2a8dcaf361c30">
      <author>Luke Dashjr</author>
      <timestamp>2018-03-14T12:36:00.000Z</timestamp>
    </message>
    <message id="msg_4" depth="2" position="3" reply_to="Kalle Rosenbaum" parent_id="mailing-list-2018-03-m1915ce83e0f003551cf4e770f80835a8af92b8b0" anchor="m182a04332d655a5beba437f0c8d97a93040a9b4c">
      <author>Anthony Towns</author>
      <timestamp>2018-03-14T16:12:00.000Z</timestamp>
    </message>
    <message id="msg_5" depth="2" position="4" reply_to="Kalle Rosenbaum" parent_id="mailing-list-2018-03-m1915ce83e0f003551cf4e770f80835a8af92b8b0" anchor="mac950ded4a7db8470f739e43e8c8594089048129">
      <author>Karl Johan Alm</author>
      <timestamp>2018-03-15T03:01:00.000Z</timestamp>
    </message>
    <message id="msg_6" depth="3" position="5" reply_to="Karl Johan Alm" parent_id="mailing-list-2018-03-mac950ded4a7db8470f739e43e8c8594089048129" anchor="m457287f3d00e017b0c44db7c6fb212178b9bdc7f">
      <author>Jim Posen</author>
      <timestamp>2018-03-15T06:43:00.000Z</timestamp>
    </message>
    <message id="msg_7" depth="4" position="6" reply_to="Jim Posen" parent_id="mailing-list-2018-03-m457287f3d00e017b0c44db7c6fb212178b9bdc7f" anchor="m1a80973953fd2f98cad3fb70667a26afef1fc5b0">
      <author>Karl Johan Alm</author>
      <timestamp>2018-03-15T07:25:00.000Z</timestamp>
    </message>
    <message id="msg_8" depth="2" position="7" reply_to="Luke Dashjr" parent_id="mailing-list-2018-03-mefac4ce7ad9629feb40133a35ac2a8dcaf361c30" anchor="m879f7f6e4be2bb6cb54c9381dd2389ad5faa918b">
      <author>Karl Johan Alm</author>
      <timestamp>2018-03-15T07:36:00.000Z</timestamp>
    </message>
    <message id="msg_9" depth="2" position="8" reply_to="Luke Dashjr" parent_id="mailing-list-2018-03-mefac4ce7ad9629feb40133a35ac2a8dcaf361c30" anchor="mec3d13e8c449df1a4ffab3f55b163907162c5b75">
      <author>Damian Williamson</author>
      <timestamp>2018-03-15T10:15:00.000Z</timestamp>
    </message>
    <message id="msg_10" depth="3" position="9" reply_to="Karl Johan Alm" parent_id="mailing-list-2018-03-m879f7f6e4be2bb6cb54c9381dd2389ad5faa918b" anchor="m053ffab4abbc64cf8211628f8bc6d6adb59143ea">
      <author>Luke Dashjr</author>
      <timestamp>2018-03-15T14:14:00.000Z</timestamp>
    </message>
    <message id="msg_11" depth="5" position="10" reply_to="Karl Johan Alm" parent_id="mailing-list-2018-03-m1a80973953fd2f98cad3fb70667a26afef1fc5b0" anchor="m4a95bf3c0f3ef971400190fcedb1a98465f88bd8">
      <author>Jim Posen</author>
      <timestamp>2018-03-15T20:53:00.000Z</timestamp>
    </message>
    <message id="msg_12" depth="4" position="11" reply_to="Luke Dashjr" parent_id="mailing-list-2018-03-m053ffab4abbc64cf8211628f8bc6d6adb59143ea" anchor="m666f29332bc2a0fac8f82ff83872cbb72f76d1b0">
      <author>Karl Johan Alm</author>
      <timestamp>2018-03-16T00:38:00.000Z</timestamp>
    </message>
    <message id="msg_13" depth="5" position="12" reply_to="Karl Johan Alm" parent_id="mailing-list-2018-03-m666f29332bc2a0fac8f82ff83872cbb72f76d1b0" anchor="m6c0282f3fdc2d376df47cd368afc6f35042ec3a0">
      <author>Greg Sanders</author>
      <timestamp>2018-03-16T01:59:00.000Z</timestamp>
    </message>
    <message id="msg_14" depth="6" position="13" reply_to="Greg Sanders" parent_id="mailing-list-2018-03-m6c0282f3fdc2d376df47cd368afc6f35042ec3a0" anchor="m6a064f53617d2eed87e760620d136c4d718ef0d8">
      <author>Karl Johan Alm</author>
      <timestamp>2018-03-16T02:04:00.000Z</timestamp>
    </message>
    <message id="msg_15" depth="1" position="14" reply_to="[bitcoin-dev] {sign|verify}message replacement Karl Johan Alm" parent_id="mailing-list-2018-03-m3d6b27e8e0daae3a8640b6c6ad73c2fb8a7b5899" anchor="m12c42f4ba1d301ba0fca3ca5ade264c2987c6750">
      <author>Pieter Wuille</author>
      <timestamp>2018-03-26T08:53:00.000Z</timestamp>
    </message>
    <message id="msg_16" depth="2" position="15" reply_to="Pieter Wuille" parent_id="mailing-list-2018-03-m12c42f4ba1d301ba0fca3ca5ade264c2987c6750" anchor="mb8e247179b354676d5fb96d96c5c799560572200">
      <author>Karl Johan Alm</author>
      <timestamp>2018-03-27T08:09:00.000Z</timestamp>
    </message>
  </thread>
  <link href="bitcoin-dev/March_2018/015850_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015848_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015833_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015832_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015831_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015830_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015828_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015827_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015824_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015823_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015825_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015822_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015821_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015819_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015820_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="bitcoin-dev/March_2018/015818_-sign-verify-message-replacement.xml" rel="alternate"/>
  <link href="https://gnusha.org/url/https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-March/015818.html" rel="alternate"/>
  <entry>
    <id>2</id>
    <title>Combined summary - {sign|verify}message replacement</title>
    <updated>2025-09-26T15:33:44.910868+00:00</updated>
    <link href="https://gnusha.org/url/https://lists.linuxfoundation.org/pipermail/bitcoin-dev/2018-March/015818.html" rel="alternate"/>
    <published>2018-03-27T08:09:41+00:00</published>
    <summary>Pieter Wuille has suggested including a version number in the signature that corresponds to a set of validation flags. This would allow verifiers to determine if they know the version number and report inconclusive results if they don't. He also proposes the idea of double verification, where the signature is checked against both consensus rules and standardness rules. If both verifications are valid, the signature is considered valid. If both are invalid, the signature is considered invalid. If the verifications yield different results, the validation is reported as inconclusive. Pieter believes that the double verify approach shows promise.In response to RPC commands, Pieter suggests extending the existing signmessage/verifymessage RPC. However, he acknowledges that there may be dependencies on the legacy behavior in some cases, so adding a legacy mode or using the old way for 1xx addresses should be sufficient.Pieter also warns about the danger of using prehashed messages for message signing. He cautions that this could be used to trick someone into signing an actual transaction unintentionally. To avoid this, he recommends always forcibly prefixing &quot;Bitcoin signed message&quot; to the message being signed.Karl Johan Alm proposes a replacement for the currently broken message signing tools that only work for legacy 1xx addresses. He suggests introducing a new structure called SignatureProof, which is a container for scriptSig and witnessProgram. Pieter Wuille suggests adding more logic to handle softforks and compatibility. One possible solution is to include a version number in the signature that corresponds to a set of validation flags. This way, if a verifier encounters a version number it doesn't know, it can report the validation as inconclusive.The conversation on the bitcoin-dev mailing list revolves around finding a solution for proving present possession of funds without compromising fungibility or hot/cold wallet separation. One proposal suggests using a FORKID in a transaction to allow for a mempool acceptance test that returns true even if the signature is not valid according to Bitcoin consensus, but only due to the FORKID. Another suggestion is to include time conditions for spending the funds. The default SIGHASH_ALL is recommended for simplicity, but an additional byte may need to be appended to the signature for encoding checks to pass. There is some debate about whether the sighash flag affects the outcome of verification.Luke Dashjr and Jim Posen discuss using sign messages to prove the availability of funds without compromising fungibility or hot/cold wallet separation. They suggest including nLockTime and nSequence in the proof container, with default values of 0 and 0xFFFF respectively. It is suggested to append a byte at the end of the signature for encoding checks, but keeping it as 0x00 since it does not affect the outcome of the verification. The participants also suggest assuming sufficient time/height on CLTV/CSV checks when there are no inputs.Luke Dashjr suggests that the current message signing feature should support &quot;proof of funds&quot; as a separate feature in addition to proving ownership of coins. Karl Johan Alm points out that such a feature could compromise fungibility and make hot/cold wallet separation impossible. Instead, he suggests that the feature should allow users to prove the availability of funds.The context discusses the idea of a custom signature checker that uses a specified address to derive a sighash and scriptPubKey. The proposed solution involves using the VerifyScript function with a new signature checker class. If the verify function returns true, it indicates a successful check, while false indicates an unsuccessful check. Feedback on this proposal is welcome.To implement this, the suggestion is to use the VerifyScript function along with the new signature checker class. When the sign parameter is set to true, the sighash is derived from the specified address. However, when sign is false, sha256d(message) is used instead. This approach allows for flexibility and customization in the process, ensuring that the appropriate parameters are used based on the situation.</summary>
  </entry>
</feed>