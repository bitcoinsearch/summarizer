<?xml version='1.0' encoding='utf-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>0</id>
  <title>Splitting more block, addr and tx classes of network traffic</title>
  <updated>2025-12-05T03:00:49.476493+00:00</updated>
  <author>
    <name>Antoine Riard</name>
  </author>
  <timestamp>2025-12-04T22:33:00+00:00</timestamp>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>0</id>
    <title>Splitting more block, addr and tx classes of network traffic</title>
    <updated>2025-12-05T03:00:49.476525+00:00</updated>
    <link href="https://gnusha.org/pi/bitcoindev/CALZpt+Hx9vFwNQd6qGSFMWXU=A6j82m6ZjJg3JaHK26WW0UQZw@mail.gmail.com/T/#u#ma5eb03aabc91e5c9e747e763b49c7311266f6d68" rel="alternate" />
    <summary>The discussion revolves around the evolution and potential improvements in the management of network traffic for Bitcoin nodes, emphasizing the need for enhanced segregation between different types of network messages such as block, transaction (tx), and address (addr) messages. Initially, Bitcoin Core connections defaulted to full relay, mixing various traffic types over a single network link. Over recent years, there has been progress towards segregating these connections, notably through the introduction of outbound block-relay-only connections, offering a clearer separation of traffic classes and increased flexibility in how nodes signal their message handling preferences to peers.

The ability to infer a peer's network topology from transaction relay traffic has practical applications, such as reducing the vulnerability of economic nodes to escalation attacks that exploit network topology information. This is particularly relevant for nodes participating in the Lightning Network, where disguising block-relay traffic can significantly enhance security. The proposal suggests further segregation of network traffic by classifying messages, which could be achieved by signaling specific capabilities in the ADDR/ADDRv2 service bits or within the VERSION message when establishing a connection. Although there is already a mechanism to disable tx-relay via the VERSION message, no equivalent exists for block-relay, highlighting a gap in the current signaling framework.

A historical suggestion to introduce an early message in the handshake process between nodes to indicate supported message classes has not yet been implemented. In practice, some nodes have begun to isolate traffic types into separate processes, indicating only essential services in the VERSION message to optimize resource use. For instance, separating the handling of "cold" blocks from full block-relay traffic can reduce CPU usage on intensive tasks. However, this approach might lead to a single logical node occupying multiple physical sockets on its peers, raising concerns about resource efficiency across the network.

In conclusion, while innovative solutions like the `archive_relayd` process for servicing cold blocks demonstrate the potential for optimizing network traffic handling at the node level, there is a broader conversation to be had about developing more efficient mechanisms for traffic segregation and signaling in the Bitcoin network. The ongoing exploration of these topics is crucial for enhancing the scalability, security, and efficiency of Bitcoin's underlying infrastructure. For further details, the discussion references the Bitcoin GitHub repository, accessible [here](https://github.com/bitcoin/bitcoin/blob/master/src/node/connection_types.h).</summary>
    <published>2025-12-04T22:33:00+00:00</published>
  </entry>
</feed>