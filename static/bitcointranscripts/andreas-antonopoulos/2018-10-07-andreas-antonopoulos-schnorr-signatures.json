{
    "id": "bitcointranscripts+andreas-antonopoulos+2018-10-07-andreas-antonopoulos-schnorr-signatures",
    "title": "Schnorr Signatures",
    "body_formatted": "{\"type\":\"paragraph\",\"text\":\"LTB Episode 378 - The Petro inside Venezuela & Schnorr Signatures\"}, {\"type\":\"paragraph\",\"text\":\"We\u2019re currently using the elliptic curve digital signature algorithm (ECDSA) which is a specific way of doing digital signatures with elliptic curves but not the only way. Schnorr signatures have some unique characteristics that make them better in many ways than the ECDSA algorithm we use today in Bitcoin.\"}, {\"type\":\"paragraph\",\"text\":\"Schnorr signatures are better because they have certain quirks in the way the mathematics plays out. Digital signatures are numbers, they\u2019re just numbers. The way you calculate these numbers is in such a way that someone else can verify that you calculated this number with knowledge of the private key without actually revealing this private key. They can verify that you have possession of the private key when you made the signature. A digital signature algorithm is just a mathematical function that gives you a number as a result of applying the private key to a message in such a way that someone else can verify that that number reveals you knew the private key without knowing the private key themselves. There are two aspects to it: signing and verifying.\"}, {\"type\":\"paragraph\",\"text\":\"Schnorr signatures exhibit certain characteristics that make them better. The first of these is the ability to do aggregation. What that means is that if you want to sign several different messages with several different private keys and produce several different signatures, with Schnorr what you can do is you can produce an aggregate signatures which is the equivalent of if you had signed the aggregate message with the aggregate of all the private keys. Think of it this way. It is as if the sum of all signatures is the same as if you applied one signature with the sum of all private keys on the sum of all messages. I\u2019m using sum in a broader sense. It is not the traditional arithmetic operation of addition but it is the equivalent in elliptic curves.\"}, {\"type\":\"paragraph\",\"text\":\"In Bitcoin a transaction may have several inputs and each one of those inputs has its own signature. Let\u2019s say you have a transaction that is spending little chunks of coins from four different addresses that your wallet controls, all of the loose change that you had and it is paying it somewhere. In a traditional Bitcoin transaction you\u2019d have four inputs in your transaction to aggregate all of this loose change that you had. You will need to apply four signatures with four different public keys against the same transaction message in order to spend that transaction. With Schnorr signatures you can apply one aggregate signature to all four inputs which means that you use one quarter of the space in the transaction.\"}, {\"type\":\"paragraph\",\"text\":\"Now take that one step further and think about you have a block that has a thousand transactions in it signed by different people with different private keys on different transactions. What if you could aggregate all of the signatures on all of the transactions and only propagate that as part of your block verification? Someone can simply validate that the whole block signature is valid for all of the transactions that are in that block by summing up all the transactions and all of the public keys and counting once. If it is valid that\u2019s done and they know that all of the signatures were valid. If it isn\u2019t they\u2019ll have to check each one independently but that\u2019s a very rare case in Bitcoin. Most of the time what you could do is aggregate all the signatures in one transaction to one signature and then aggregate all the signatures across all of the transactions in a block into one signature for the whole block.\"}, {\"type\":\"paragraph\",\"text\":\"You\u2019re transmitting 1/25 of the data in that particular case. It optimizes bandwidth, it optimizes disk storage, it optimizes blockchain capacity or block capacity. It optimizes verification speed. That\u2019s only the start of it. Here\u2019s another scenario. Let\u2019s say you\u2019re trying to do a multisig between 5 participants. Let\u2019s say a 5-of-5 multisig. Today in order to do that with traditional multisig you\u2019d have to apply 5 signatures which correspond to the 5 public keys that are known for the multisig and you\u2019d have to verify all 5 signatures in order to confirm that multisig. WIth Schnorr signatures and a construct invented by I believe Andrew Poelstra, Greg Maxwell and Pieter Wuille called musig you can do a compound multisignature which basically means the 5 parties come together and they produce one signature that represents the aggregate of all of their 5 public keys. You validate that as a single signature on the multisig which is the unanimous vote if you like, the unanimous case of a multisig is a special case and you can do it with one signature that is constructed jointly by all 5 participants. So multisig now becomes a one signature operation. That\u2019s step one. Now imagine if this from the public perspective was indistinguishable from a single payment where a single party signs with a single public key and a single signature which means that you can turn all multisig to look exactly the same as a straightforward one signature payment transaction on Bitcoin.\"}, {\"type\":\"paragraph\",\"text\":\"Now imagine that you can do that not just for the unanimous case of a 5-of-5 multisignature but you can do it for any type of monotonic boolean function meaning this key or these two and this one or these three plus a timelock of 30 minutes and these other two or this hashlock and these five keys. Any combination of OR, AND, OR, AND, OR, AND of any group of keys can be represented now by a single aggregate signature which shortcuts all of that. You can make all of those look like a simple payment. Your use of smart contracts effectively and complex payment solutions is invisible because it all looks as if a single payment was made with a single signature by a single public key.\"}, {\"type\":\"paragraph\",\"text\":\"It requires a soft fork and the test code has already been written up and submitted as a BIP.\"}, {\"type\":\"paragraph\",\"text\":\"First of all a lot of the research is very, very new. The musig construct which is a massive optimization of multisig for Schnorr was only invented about a year ago and written about. The implementation details were still being hashed out recently. Some of these new formulations, the hiding of multisig and making it look like a single payment which is called taproot and the equivalent property called graftroot. These are two new inventions, they\u2019re barely a few months old since they were first discussed. Now it\u2019s a matter of hashing out the details of creating an implementation that is both flexible enough, generic enough and efficient enough that it can encompass all of these privacy enhancements and verification enhancements. The next question was the stumbling block or major decision point was do these get launched as a series of changes that are discrete from each other and if so what they do is they create a challenge whereby people that try to use the enchanted privacy mechanisms are obvious, they\u2019re visible. Or do you do all of them in one batch of changes so that you can immediately go to the model where your complex multisig looks like a single signature payment in which case the people using these enhanced privacy features are indistinguishable from those who are not which then makes the privacy even more powerful. The decision that seems to have come out of this is to deploy all of these features together so that privacy is not something that is distinguishable from those not using privacy. That\u2019s a great idea in my opinion. Now taproot, graftroot and Schnorr musig are going to be deployed at the same time with a single soft fork.\"}, {\"type\":\"paragraph\",\"text\":\"I would expect that we\u2019re probably no more than a year out from that moment. When the technology is deployed on the protocol level that doesn\u2019t mean it\u2019s available in a wallet that you can use with a nice user interface. That may take another year until it is broadly usable but the feature should be added to Bitcoin and create a significant increase in privacy, optimizations for scalability and better multisig probably in the next year.\"}, {\"type\":\"paragraph\",\"text\":\"You can aggregate an infinite number of signatures down to one. There is some relationship between this and the Mimblewimble approach to doing block compression that is rather interesting. The discussions are from a practical perspective. How much space do you save if you do this within a transaction? How much more space do you save if you do this within a block? Can you do this across blocks? One of the things that you have to realize is that you have to do this in a way that doesn\u2019t break backwards compatibility for existing clients or that allows this to be an opt-in feature rather than a mandatory feature that everybody has to follow.\"}, {\"type\":\"paragraph\",\"text\":\"We\u2019re currently in the fourth generation of multisig and the previous three generations are still very much in action. The first generation of multisig is what\u2019s called naked multisig which is multisig without pay-to-script-hash. It\u2019s multisig without a \u20183\u2019 address but where you put the entire script in the UTXO. That\u2019s very rare nowadays, you\u2019ll probably not see it. Then you\u2019ve got P2SH wrapped multisig which is what most of us use which is where the multisig address starts with a \u20183\u2019. That\u2019s the one we\u2019re most familiar with. Most people haven\u2019t noticed that there is now a new form of multisig which is multisig with a SegWIt address which is pay-to-witness-script-hash multisig which is a \u2018bc1\u2019 address with a new SegWit style address. That\u2019s not even widely spread because SegWit is so new that people haven\u2019t yet been doing SegWit multisig but it is beginning to appear now in a few wallets. Schnorr multisig would be the fourth iteration and you still have the previous three in operation. It is a rolling window.\"}, {\"type\":\"paragraph\",\"text\":\"I\u2019m sure there\u2019s pushback against this, there\u2019s no such thing as a non-controversial upgrade to the Bitcoin protocol. Of course this is a non-mandatory, opt-in that is backward compatible so that you don\u2019t have to validate or use this feature if you don\u2019t want to but that doesn\u2019t remove it from being controversial. In a world where vaccines are controversial I don\u2019t think we\u2019ll ever see a Bitcoin improvement that isn\u2019t.\"}",
    "body": "LTB Episode 378 - The Petro inside Venezuela & Schnorr Signatures\n\nWe\u2019re currently using the elliptic curve digital signature algorithm (ECDSA) which is a specific way of doing digital signatures with elliptic curves but not the only way. Schnorr signatures have some unique characteristics that make them better in many ways than the ECDSA algorithm we use today in Bitcoin.\n\nSchnorr signatures are better because they have certain quirks in the way the mathematics plays out. Digital signatures are numbers, they\u2019re just numbers. The way you calculate these numbers is in such a way that someone else can verify that you calculated this number with knowledge of the private key without actually revealing this private key. They can verify that you have possession of the private key when you made the signature. A digital signature algorithm is just a mathematical function that gives you a number as a result of applying the private key to a message in such a way that someone else can verify that that number reveals you knew the private key without knowing the private key themselves. There are two aspects to it: signing and verifying.\n\nSchnorr signatures exhibit certain characteristics that make them better. The first of these is the ability to do aggregation. What that means is that if you want to sign several different messages with several different private keys and produce several different signatures, with Schnorr what you can do is you can produce an aggregate signatures which is the equivalent of if you had signed the aggregate message with the aggregate of all the private keys. Think of it this way. It is as if the sum of all signatures is the same as if you applied one signature with the sum of all private keys on the sum of all messages. I\u2019m using sum in a broader sense. It is not the traditional arithmetic operation of addition but it is the equivalent in elliptic curves.\n\nIn Bitcoin a transaction may have several inputs and each one of those inputs has its own signature. Let\u2019s say you have a transaction that is spending little chunks of coins from four different addresses that your wallet controls, all of the loose change that you had and it is paying it somewhere. In a traditional Bitcoin transaction you\u2019d have four inputs in your transaction to aggregate all of this loose change that you had. You will need to apply four signatures with four different public keys against the same transaction message in order to spend that transaction. With Schnorr signatures you can apply one aggregate signature to all four inputs which means that you use one quarter of the space in the transaction.\n\nNow take that one step further and think about you have a block that has a thousand transactions in it signed by different people with different private keys on different transactions. What if you could aggregate all of the signatures on all of the transactions and only propagate that as part of your block verification? Someone can simply validate that the whole block signature is valid for all of the transactions that are in that block by summing up all the transactions and all of the public keys and counting once. If it is valid that\u2019s done and they know that all of the signatures were valid. If it isn\u2019t they\u2019ll have to check each one independently but that\u2019s a very rare case in Bitcoin. Most of the time what you could do is aggregate all the signatures in one transaction to one signature and then aggregate all the signatures across all of the transactions in a block into one signature for the whole block.\n\nYou\u2019re transmitting 1/25 of the data in that particular case. It optimizes bandwidth, it optimizes disk storage, it optimizes blockchain capacity or block capacity. It optimizes verification speed. That\u2019s only the start of it. Here\u2019s another scenario. Let\u2019s say you\u2019re trying to do a multisig between 5 participants. Let\u2019s say a 5-of-5 multisig. Today in order to do that with traditional multisig you\u2019d have to apply 5 signatures which correspond to the 5 public keys that are known for the multisig and you\u2019d have to verify all 5 signatures in order to confirm that multisig. WIth Schnorr signatures and a construct invented by I believe Andrew Poelstra, Greg Maxwell and Pieter Wuille called musig you can do a compound multisignature which basically means the 5 parties come together and they produce one signature that represents the aggregate of all of their 5 public keys. You validate that as a single signature on the multisig which is the unanimous vote if you like, the unanimous case of a multisig is a special case and you can do it with one signature that is constructed jointly by all 5 participants. So multisig now becomes a one signature operation. That\u2019s step one. Now imagine if this from the public perspective was indistinguishable from a single payment where a single party signs with a single public key and a single signature which means that you can turn all multisig to look exactly the same as a straightforward one signature payment transaction on Bitcoin.\n\nNow imagine that you can do that not just for the unanimous case of a 5-of-5 multisignature but you can do it for any type of monotonic boolean function meaning this key or these two and this one or these three plus a timelock of 30 minutes and these other two or this hashlock and these five keys. Any combination of OR, AND, OR, AND, OR, AND of any group of keys can be represented now by a single aggregate signature which shortcuts all of that. You can make all of those look like a simple payment. Your use of smart contracts effectively and complex payment solutions is invisible because it all looks as if a single payment was made with a single signature by a single public key.\n\nIt requires a soft fork and the test code has already been written up and submitted as a BIP.\n\nFirst of all a lot of the research is very, very new. The musig construct which is a massive optimization of multisig for Schnorr was only invented about a year ago and written about. The implementation details were still being hashed out recently. Some of these new formulations, the hiding of multisig and making it look like a single payment which is called taproot and the equivalent property called graftroot. These are two new inventions, they\u2019re barely a few months old since they were first discussed. Now it\u2019s a matter of hashing out the details of creating an implementation that is both flexible enough, generic enough and efficient enough that it can encompass all of these privacy enhancements and verification enhancements. The next question was the stumbling block or major decision point was do these get launched as a series of changes that are discrete from each other and if so what they do is they create a challenge whereby people that try to use the enchanted privacy mechanisms are obvious, they\u2019re visible. Or do you do all of them in one batch of changes so that you can immediately go to the model where your complex multisig looks like a single signature payment in which case the people using these enhanced privacy features are indistinguishable from those who are not which then makes the privacy even more powerful. The decision that seems to have come out of this is to deploy all of these features together so that privacy is not something that is distinguishable from those not using privacy. That\u2019s a great idea in my opinion. Now taproot, graftroot and Schnorr musig are going to be deployed at the same time with a single soft fork.\n\nI would expect that we\u2019re probably no more than a year out from that moment. When the technology is deployed on the protocol level that doesn\u2019t mean it\u2019s available in a wallet that you can use with a nice user interface. That may take another year until it is broadly usable but the feature should be added to Bitcoin and create a significant increase in privacy, optimizations for scalability and better multisig probably in the next year.\n\nYou can aggregate an infinite number of signatures down to one. There is some relationship between this and the Mimblewimble approach to doing block compression that is rather interesting. The discussions are from a practical perspective. How much space do you save if you do this within a transaction? How much more space do you save if you do this within a block? Can you do this across blocks? One of the things that you have to realize is that you have to do this in a way that doesn\u2019t break backwards compatibility for existing clients or that allows this to be an opt-in feature rather than a mandatory feature that everybody has to follow.\n\nWe\u2019re currently in the fourth generation of multisig and the previous three generations are still very much in action. The first generation of multisig is what\u2019s called naked multisig which is multisig without pay-to-script-hash. It\u2019s multisig without a \u20183\u2019 address but where you put the entire script in the UTXO. That\u2019s very rare nowadays, you\u2019ll probably not see it. Then you\u2019ve got P2SH wrapped multisig which is what most of us use which is where the multisig address starts with a \u20183\u2019. That\u2019s the one we\u2019re most familiar with. Most people haven\u2019t noticed that there is now a new form of multisig which is multisig with a SegWIt address which is pay-to-witness-script-hash multisig which is a \u2018bc1\u2019 address with a new SegWit style address. That\u2019s not even widely spread because SegWit is so new that people haven\u2019t yet been doing SegWit multisig but it is beginning to appear now in a few wallets. Schnorr multisig would be the fourth iteration and you still have the previous three in operation. It is a rolling window.\n\nI\u2019m sure there\u2019s pushback against this, there\u2019s no such thing as a non-controversial upgrade to the Bitcoin protocol. Of course this is a non-mandatory, opt-in that is backward compatible so that you don\u2019t have to validate or use this feature if you don\u2019t want to but that doesn\u2019t remove it from being controversial. In a world where vaccines are controversial I don\u2019t think we\u2019ll ever see a Bitcoin improvement that isn\u2019t.\n\n\n",
    "body_type": "markdown",
    "created_at": "2018-10-07T00:00:00.000Z",
    "domain": "https://btctranscripts.com/",
    "url": "https://btctranscripts.com/andreas-antonopoulos/2018-10-07-andreas-antonopoulos-schnorr-signatures",
    "categories": [
        "podcast"
    ],
    "tags": [
        "schnorr-signatures"
    ],
    "authors": [
        "Andreas Antonopoulos"
    ],
    "indexed_at": "2024-03-21T16:33:35.888Z",
    "transcript_by": "Michael Folkson",
    "summary": "In a recent episode of LTB, Andreas Antonopoulos delved into the intricacies and potential benefits of Schnorr signatures compared to the currently utilized ECDSA algorithm within Bitcoin's framework. The discussion highlighted how Schnorr signatures offer a more efficient method for executing digital signatures by utilizing a unique mathematical function that allows for the verification of a private key's involvement without its disclosure. This feature not only enhances security but also streamlines the verification process.\n\nA standout advantage of Schnorr signatures is their ability to aggregate multiple signatures into a singular one. This capability is particularly beneficial in scenarios involving numerous transactions or inputs, as it significantly reduces the amount of data required for each transaction. For instance, a Bitcoin transaction pulling funds from multiple addresses can be simplified through the use of a single aggregate signature rather than requiring individual signatures for each input. This aggregation not only conserves space within the blockchain but also optimizes bandwidth and storage, leading to a more scalable system.\n\nFurther exploring the potential of Schnorr signatures, Antonopoulos discussed their application in multisignature (multisig) transactions, a domain where they introduce remarkable optimizations. By enabling the combination of several public keys into a unified signature through a construct known as musig, developed by Andrew Poelstra, Greg Maxwell, and Pieter Wuille, Schnorr signatures streamline the multisig process. This advancement means that complex multisig transactions, which traditionally demanded multiple signatures, can now be executed with a singular, aggregated signature, enhancing both privacy and efficiency.\n\nThe implications of integrating Schnorr signatures extend beyond mere transaction optimization. They herald a significant leap towards making Bitcoin's smart contracts and advanced payment solutions indiscernible from simple transactions, thereby bolstering privacy. Such an integration requires a soft fork, with test code already proposed in a Bitcoin Improvement Proposal (BIP). Although the technological groundwork has been laid, the deployment of Schnorr signatures, alongside related innovations like taproot and graftroot, demands careful consideration to ensure backward compatibility and widespread adoption without sacrificing privacy enhancements.\n\nAntonopoulos pointed out the critical juncture at which the Bitcoin community finds itself regarding the implementation of Schnorr signatures. The choice between sequential, discrete updates and a comprehensive batch approach could dictate the trajectory of Bitcoin's privacy and scalability advancements. The consensus leans towards a bundled update to maintain the undetectability of enhanced privacy features, positioning Schnorr signatures, musig, taproot, and graftroot as pivotal elements in the forthcoming soft fork expected within a year.\n\nAs the discussion concluded, Antonopoulos touched on the evolution of multisig technology and the inherent challenges of protocol upgrades in the Bitcoin ecosystem. Despite the anticipated improvements Schnorr signatures promise to bring, the path to their integration underscores the delicate balance between innovation and the preservation of a decentralized, secure, and user-friendly platform. The ongoing development and discussion surrounding these signatures reflect a broader narrative of continuous improvement within the Bitcoin protocol, highlighting the community's commitment to fostering a more efficient, private, and scalable blockchain infrastructure."
}