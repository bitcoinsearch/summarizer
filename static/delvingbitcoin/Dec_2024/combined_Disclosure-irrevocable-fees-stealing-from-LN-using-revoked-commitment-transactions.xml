<?xml version='1.0' encoding='UTF-8'?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <id>2</id>
  <title>Combined summary - Disclosure: irrevocable fees---stealing from LN using revoked commitment transactions</title>
  <updated>2024-12-13T02:38:38.542047+00:00</updated>
  <author>
    <name>ariard 2024-12-12 06:42:46.666000+00:00</name>
  </author>
  <author>
    <name>harding  . 2024-12-11 00:18:59.444000+00:00</name>
  </author>
  <link href="delvingbitcoin/Dec_2024/3763_Disclosure-irrevocable-fees-stealing-from-LN-using-revoked-commitment-transactions.xml" rel="alternate"/>
  <link href="delvingbitcoin/Dec_2024/3757_Disclosure-irrevocable-fees-stealing-from-LN-using-revoked-commitment-transactions.xml" rel="alternate"/>
  <generator uri="https://lkiesow.github.io/python-feedgen" version="0.9.0">python-feedgen</generator>
  <entry>
    <id>2</id>
    <title>Combined summary - Disclosure: irrevocable fees---stealing from LN using revoked commitment transactions</title>
    <updated>2024-12-13T02:38:38.542086+00:00</updated>
    <link href="https://delvingbitcoin.org/t/disclosure-irrevocable-fees-stealing-from-ln-using-revoked-commitment-transactions/1314" rel="alternate"/>
    <summary>In the realm of blockchain technology, particularly within the Lightning Network (LN), a critical vulnerability was identified that allowed for the potential misappropriation of up to 98% of a channel's funds by miners. This issue was not limited to malicious actions but could also manifest during regular operations, with losses generally falling below the maximum possible impact. It was discovered across major LN implementations such as Eclair, LDK, and LND under their default settings, including Core Lightning when operated with specific configurations that bypass fee limits. The flaw is rooted in the manipulation of offchain LN commitment transactions by reallocating balances and adjusting fees to divert the bulk of funds upon transaction confirmation.

To combat this vulnerability, updates have been deployed across various LN implementations, with each aiming to mitigate the risk by tightening controls over transaction fees. Despite these efforts, the potential for exploitation remains due to the variable nature of onchain transaction fees. Addressing this issue thoroughly requires modifications at both the LN protocol level and within Bitcoin's peer-to-peer transaction relay mechanisms. The suggested remedies involve capping the amount that can be allocated to transaction fees and moving towards fixed commitment fees to eliminate the vulnerability permanently. However, these solutions call for significant updates to the protocols, including the implementation of reliable package relay for Bitcoin and adjustments to the LN protocol.

The discovery and subsequent resolution process underscored the collaborative effort among LN implementation maintainers and highlighted the complexities involved in managing fee dynamics in offchain contract protocols. This incident has spurred ongoing discussions within the Bitcoin and LN communities aimed at simplifying and strengthening the management of transaction fees, thereby enhancing the security and resilience of offchain payment channels. Detailed information about the vulnerability and the steps taken to address it can be found through various resources, including [Eclair 2815](URL), [Eclair v0.10.0](URL), [LDK 3045](URL), [LDK 0.0.123](URL), [LND 8824](URL), and [LND 0.18.3-beta](URL).

Furthermore, an analysis of the historical deployment of feerate limits reveals that such measures were initially implemented to counter vulnerabilities linked to "irrevocable fees" by setting upper bounds on acceptable feerates from channel counterparts. These safeguards, introduced following mitigations against "excessive trimmed HTLCs / dust HTLC exposure," facilitated easier calculation of the worst-case msat denominated dust HTLCs exposure from varied scenarios since 2021. Additionally, the Validating Lightning Signer (VLS) has consistently included a `validate_fee()` check from its pre-production release to vet proposed feerates against a maximum threshold, addressing concerns related to "miner-fee-siphoning attacks." This preventive approach indicates a proactive stance towards securing transactions within the LN framework, demonstrating the evolving measures taken to shield network participants from emerging threats.</summary>
    <published>2024-12-12T06:42:46.666000+00:00</published>
  </entry>
</feed>
